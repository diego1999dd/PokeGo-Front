<div class="relative flex items-center justify-center min-h-screen p-4">
  <div
    class="absolute inset-0 bg-cover bg-center"
    style="background-image: url('/Pikachu.png')"
    role="img"
    aria-label="Imagem de fundo com tema Pokémon"
  >
    <div class="absolute inset-0 bg-black opacity-30"></div>
  </div>

  <div class="w-full max-w-md bg-white p-8 shadow-2xl rounded-xl relative z-10">
    <div class="text-center mb-6">
      <h1 class="text-3xl font-extrabold text-blue-700">Atualizar Senha</h1>
      <p class="text-gray-500 mt-2">Mude sua senha para uma nova e segura.</p>
    </div>

    <div
      *ngIf="successMessage"
      class="mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg text-sm text-center"
    >
      {{ successMessage }}
      <a [routerLink]="['/login']" class="font-medium text-green-600 underline ml-2">Faça Login</a>
    </div>

    <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" *ngIf="!successMessage">
      <fieldset>
        <legend class="sr-only">Campos de Senha</legend>

        <div class="mb-4">
          <label for="oldPassword" class="block text-sm font-medium text-gray-700 mb-1"
            >Senha Atual</label
          >
          <input
            formControlName="oldPassword"
            type="password"
            placeholder="********"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg"
          />
        </div>

        <div class="mb-4">
          <label for="newPassword" class="block text-sm font-medium text-gray-700 mb-1"
            >Nova Senha (Mín. 6)</label
          >
          <input
            formControlName="newPassword"
            type="password"
            placeholder="********"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg"
          />
        </div>

        <div class="mb-6">
          <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1"
            >Confirme Nova Senha</label
          >
          <input
            formControlName="confirmPassword"
            type="password"
            placeholder="********"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg"
          />
          <p
            *ngIf="changePasswordForm.errors?.['mismatch'] && changePasswordForm.get('confirmPassword')?.touched"
            class="text-xs text-red-500 mt-1"
          >
            As senhas não coincidem.
          </p>
        </div>
      </fieldset>

      <div
        *ngIf="errorMessage"
        class="mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm text-center"
      >
        {{ errorMessage }}
      </div>

      <button
        type="submit"
        [disabled]="changePasswordForm.invalid || loading"
        class="w-full flex justify-center py-2 px-4 rounded-lg shadow-sm text-lg font-medium text-white transition duration-150 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400"
      >
        {{ loading ? 'Atualizando...' : 'Atualizar Senha' }}
      </button>

      <div class="mt-6 text-center text-sm text-gray-600">
        <a [routerLink]="['/pokemon']" class="font-medium text-blue-600 hover:text-blue-500"
          >Cancelar</a
        >
      </div>
    </form>
  </div>
</div>
